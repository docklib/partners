!function(){"use strict";class n{constructor(n,t,e=!0,r={bottom:"20px",right:"20px"},i=!1,a=2){this.banners=n,this.iframeBanners=t,this.showIframeBanner=e,this.position=r,this.debug=i,this.bannerCount=0,this.maxBanners=a,this.currentBannerElement=null,this.autoCloseTimer=null,this.log("Banner initialized with debug mode enabled"),this.log("Banners:",this.banners),this.log("iframeBanners:",this.iframeBanners),this.allBanners=[...this.banners],this.iframeBanners&&this.iframeBanners.length>0&&this.showIframeBanner&&this.iframeBanners.forEach((n=>{this.allBanners.push({type:"iframe",...n})})),this.currentBanner=this.getRandomBanner(),this.log("Selected banner:",this.currentBanner),this.createStyles(),this.renderBanner()}log(...n){if(this.debug){(new Date).toISOString().split("T")[1].slice(0,-1)}}getRandomBanner(){const n=this.allBanners[Math.floor(Math.random()*this.allBanners.length)];return this.log("Random banner selected:",n),n}getRandomIframeBanner(){const n=this.iframeBanners.map((n=>({type:"iframe",...n})));let t=n;this.currentBanner&&"iframe"===this.currentBanner.type&&(t=n.filter((n=>n.src!==this.currentBanner.src)),0===t.length&&(t=n));const e=t[Math.floor(Math.random()*t.length)];return this.log("Random iframe banner selected:",e),e}getRandomDelay(){return Math.floor(5e3*Math.random())+1e4}extractDomain(n){try{const t=new URL(n);return`${t.protocol}//${t.host}`}catch(t){return this.log("Error extracting domain from URL:",n,t),n}}showNextBanner(n=!0){if(this.bannerCount++,this.bannerCount<this.maxBanners)if(1===this.bannerCount)if(n){const n=this.getRandomDelay();this.log(`Scheduling next iframe banner to show in ${n/1e3} seconds`),setTimeout((()=>{this.currentBanner=this.getRandomIframeBanner(),this.log("Next iframe banner selected:",this.currentBanner),this.renderBanner()}),n)}else this.log("Showing next iframe banner immediately"),this.currentBanner=this.getRandomIframeBanner(),this.log("Next iframe banner selected:",this.currentBanner),this.renderBanner();else if(n){const n=this.getRandomDelay();this.log(`Scheduling next banner to show in ${n/1e3} seconds`),setTimeout((()=>{this.currentBanner=this.getRandomBanner(),this.log("Next banner selected:",this.currentBanner),this.renderBanner()}),n)}else this.log("Showing next banner immediately"),this.currentBanner=this.getRandomBanner(),this.log("Next banner selected:",this.currentBanner),this.renderBanner();else this.log(`Maximum banner count (${this.maxBanners}) reached. No more banners will be shown.`)}createStyles(){const n=document.createElement("style"),{top:t,right:e,bottom:r,left:i}=this.position,a=`\n      ${t?`top: ${t};`:""}\n      ${e?`right: ${e};`:""}\n      ${r?`bottom: ${r};`:""}\n      ${i?`left: ${i};`:""}\n    `;n.textContent=`\n      .pp-banner-partner {\n        position: fixed !important;\n        ${a}\n        z-index: 999999 !important;\n        transition: transform 0.3s ease !important;\n        transform: translateX(120%) !important;\n      }\n      .pp-banner-partner.show {\n        transform: translateX(0) !important;\n      }\n      .pp-banner-partner img {\n        max-width: 220px !important;\n        height: auto !important;\n        overflow: hidden !important;\n        box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.4) !important;\n        transition: transform 0.3s ease !important;\n        border-radius: 10px !important;\n      }\n      .pp-banner-partner img:hover {\n        transform: scale(1.05) !important;\n      }\n      .pp-banner-close-button {\n        position: absolute !important;\n        top: -10px !important;\n        right: -10px !important;\n        width: 24px !important;\n        height: 24px !important;\n        background: #fff !important;\n        border-radius: 50% !important;\n        display: flex !important;\n        border: 1px solid rgb(143, 138, 138) !important;\n        align-items: center !important;\n        justify-content: center !important;\n        cursor: pointer !important;\n        box-shadow: 0 0 5px rgba(0,0,0,0.3) !important;\n        z-index: 1000000 !important;\n      }\n      .pp-banner-close-button::before,\n      .pp-banner-close-button::after {\n        content: '' !important;\n        position: absolute !important;\n        width: 12px !important;\n        height: 2px !important;\n        background: #333 !important;\n        transform-origin: center !important;\n      }\n      .pp-banner-close-button::before {\n        transform: rotate(45deg) !important;\n      }\n      .pp-banner-close-button::after {\n        transform: rotate(-45deg) !important;\n      }\n      .pp-banner-close-button:hover {\n        transform: scale(1.1) !important;\n      }\n      \n      /* Enhanced specificity for iframe banner */\n      div.pp-banner-iframe {\n        position: fixed !important;\n        ${a}\n        z-index: 999999 !important;\n        transition: transform 0.3s ease !important;\n        transform: translateX(120%) !important;\n        overflow: visible !important;\n        border-radius: 10px !important;\n        border: 1px solid rgb(185, 185, 185) !important;\n        box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.4) !important;\n        padding: 4px !important;\n        background: white !important;\n        /* Reset any inherited transforms */\n        top: auto !important;\n        left: auto !important;\n        ${t?`top: ${t} !important;`:""}\n        ${e?`right: ${e} !important;`:""}\n        ${r?`bottom: ${r} !important;`:""}\n        ${i?`left: ${i} !important;`:""}\n      }\n      div.pp-banner-iframe.show {\n        transform: translateX(0) !important;\n      }\n      div.pp-banner-iframe > iframe {\n        /* Complete style isolation for iframe */\n        position: static !important;\n        top: auto !important;\n        left: auto !important;\n        right: auto !important;\n        bottom: auto !important;\n        transform: none !important;\n        border: none !important;\n        border-radius: 10px !important;\n        display: block !important;\n        margin: 0 !important;\n        padding: 0 !important;\n        box-shadow: none !important;\n        opacity: 1 !important;\n        visibility: visible !important;\n        z-index: auto !important;\n        max-width: none !important;\n        max-height: none !important;\n        min-width: 0 !important;\n        min-height: 0 !important;\n      }\n      .pp-banner-hide {\n        transform: translateX(120%) !important;\n      }\n      \n      /* Additional reset rules to prevent inheritance */\n      .pp-banner-iframe,\n      .pp-banner-iframe * {\n        box-sizing: border-box !important;\n      }\n    `,document.head.appendChild(n)}renderBanner(){if(this.log("Rendering banner:",this.currentBanner),"iframe"===this.currentBanner.type?(this.log("Rendering iframe banner"),this.renderIframe(this.currentBanner)):(this.log("Rendering image banner"),this.renderImageBanner(this.currentBanner)),0===this.bannerCount&&this.maxBanners>1){const n=this.getRandomDelay();this.log(`Setting auto-close timer for ${n/1e3} seconds (first banner only)`),this.autoCloseTimer=setTimeout((()=>{this.log("Auto-closing banner due to timeout"),this.currentBannerElement&&("iframe"===this.currentBanner.type?(this.currentBannerElement.classList.remove("show"),this.currentBannerElement.style.transform="translateX(120%)"):this.currentBannerElement.classList.add("pp-banner-hide"),setTimeout((()=>{this.currentBannerElement&&(this.currentBannerElement.remove(),this.currentBannerElement=null),this.showNextBanner(!1)}),300))}),n)}else this.log("This is the second banner - no auto-close timer will be set")}renderImageBanner(n){this.log("Creating image banner element for:",n);const t=document.createElement("a");t.href=n.link,t.className="pp-banner-partner",t.target="_blank";const e=document.createElement("div");e.className="pp-banner-close-button",e.onclick=e=>{e.preventDefault(),e.stopPropagation(),this.log("Opening banner link on close:",n.link),window.open(n.link,"_blank"),t.classList.add("pp-banner-hide"),this.autoCloseTimer&&(clearTimeout(this.autoCloseTimer),this.autoCloseTimer=null),setTimeout((()=>{t.remove(),this.currentBannerElement=null,this.showNextBanner(!0)}),300)};const r=document.createElement("img");r.src=n.image,r.alt=n.text,r.title=n.text,t.appendChild(e),t.appendChild(r),document.body.appendChild(t),this.currentBannerElement=t,setTimeout((()=>{this.log("Showing image banner"),t.classList.add("show")}),1e3)}renderIframe(n){this.log("Creating iframe banner element for:",n);const t=document.createElement("div");t.className="pp-banner-iframe",t.style.cssText=`\n      position: fixed !important;\n      ${this.position.top?`top: ${this.position.top} !important;`:""}\n      ${this.position.right?`right: ${this.position.right} !important;`:""}\n      ${this.position.bottom?`bottom: ${this.position.bottom} !important;`:""}\n      ${this.position.left?`left: ${this.position.left} !important;`:""}\n      z-index: 999999 !important;\n      transition: transform 0.3s ease !important;\n      transform: translateX(120%) !important;\n    `;const e=document.createElement("div");e.className="pp-banner-close-button",e.onclick=()=>{const e=this.extractDomain(n.src);this.log("Opening iframe domain on close:",e),window.open(e,"_blank"),t.classList.remove("show"),t.style.transform="translateX(120%)",this.autoCloseTimer&&(clearTimeout(this.autoCloseTimer),this.autoCloseTimer=null),setTimeout((()=>{t.remove(),this.currentBannerElement=null,this.showNextBanner(!0)}),300)};const r=document.createElement("iframe");r.src=n.src,r.width=n.width,r.height=n.height,r.style.cssText=`\n      position: static !important;\n      border: none !important;\n      border-radius: 10px !important;\n      display: block !important;\n      margin: 0 !important;\n      padding: 0 !important;\n      transform: none !important;\n      top: auto !important;\n      left: auto !important;\n      opacity: 1 !important;\n      visibility: visible !important;\n      width: ${n.width} !important;\n      height: ${n.height} !important;\n    `,t.appendChild(e),t.appendChild(r),document.body.appendChild(t),this.currentBannerElement=t,setTimeout((()=>{this.log("Showing iframe banner"),t.classList.add("show"),t.style.transform="translateX(0)"}),1e3)}}const t=()=>{if(document.getElementById("pp-anchor-styles"))return;const n=document.createElement("style");n.id="pp-anchor-styles",n.textContent="\n    @media (max-width: 799px) {\n      .pp-anchor-container {\n        border-radius: 0 !important;\n      }\n    }\n\n    @keyframes pp-buzz {\n      0%, 100% {\n        transform: translateX(0) scale(1);\n      }\n      10%, 30%, 50% {\n        transform: translateX(-2px) scale(1);\n      }\n      20%, 40% {\n        transform: translateX(2px) scale(1);\n      }\n      60% {\n        transform: translateX(0) scale(1.05);\n      }\n      65% {\n        transform: translateX(0) scale(1);\n      }\n    }\n  ",document.head.appendChild(n)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t();const e=[],r=[{link:"https://spotifystats.com?ref=galacticnetwork.org",text:"Spotify Stats"},{link:"https://what-time-in.xyz?ref=galacticnetwork.org",text:"What Time In"}],i=[{src:"https://colormagic.app/embed?ref=galacticnetwork.org",width:"300px",height:"308px"}],a={top:"60px",right:"20px"},o=["https://spotifystats.com?ref=galacticnetwork.org","https://musicpiechart.com?ref=galacticnetwork.org","https://mytopspotify.io?ref=galacticnetwork.org","https://what-time-in.xyz?ref=galacticnetwork.org","https://stats.cacmath.org?ref=galacticnetwork.org"],s=!1,m="pp_link_pool_cached";function l(){return function(n){const t=`${n}=`,e=document.cookie.split(";");for(let r=0;r<e.length;r++){let n=e[r];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null}(m)}function p(n){!function(n,t,e){const r=new Date;r.setTime(r.getTime()+60*e*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${n}=${t};${i};path=/`}(m,n,24)}async function h(n,t=0){try{const e=new AbortController;let r;return t>0&&(r=setTimeout((()=>e.abort()),t)),await fetch(n,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:t>0?e.signal:void 0}),r&&clearTimeout(r),!0}catch(e){return!1}}function c(n){if(!n||!Array.isArray(n)||0===n.length)return null;const t=n[Math.floor(Math.random()*n.length)];return(null==t?void 0:t.link)||null}{{const u=document.createElement("script");u.defer=!0,u.dataset.domain="galacticnetwork.org",u.src="https://stats.senty.com.au/js/script.outbound-links.pageview-props.tagged-events.js",document.head.appendChild(u)}async function d(){{let n;if(o&&o.length>0)n=(async()=>{const n=l();if(n){const t=await async function(n,t=3e3){return n&&await h(n,t)?n:null}(n,2e3,s);if(t)return t}const t=await async function(n,t=0){if(!n||!Array.isArray(n)||0===n.length)return null;const e=n.map(((n,e)=>h(n,t).then((t=>({url:n,index:e,isAccessible:t})))));try{const n=(await Promise.all(e)).filter((n=>n.isAccessible)).sort(((n,t)=>n.index-t.index))[0];return n?n.url:null}catch(r){return null}}(o,0,s);return t?(p(t),t):c(r)})();else{const t=c(r);n=Promise.resolve(t)}if(!n)return;const t=document.createElement("div");t.id="ol1",t.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 999999999;\n      ",t.addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.remove(),n.then((n=>{if(!n)return;let t=n;if("function"==typeof window.plausible)try{window.plausible("Outbound Link: Click",{props:{url:t}})}catch(e){}window.open(t,"_blank","noreferrer")})).catch((n=>{}))}),{capture:!0}),document.body.appendChild(t)}new n(e,i,true,a||{bottom:"20px",right:"20px"},s,void 0)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{d()})):d()}}();
