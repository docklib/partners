!function(){"use strict";class t{constructor(t,n,e=!1){this.config=t,this.bannerPosition=n||{bottom:"8px",right:"8px"},this.debug=e,this.container=null,this.cornerButton=null,this.isVisible=!1,this.log("Anchor initialized with config:",this.config)}log(...t){this.debug}show(){this.isVisible?this.log("Anchor already visible, skipping"):(this.log("Creating anchor ad unit"),this.createContainer(),this.createCloseButton(),this.createIframe(),document.body.appendChild(this.container),setTimeout((()=>{this.container.style.setProperty("transform","translate(-50%, 0)","important"),this.isVisible=!0,this.log("Anchor ad displayed with transform:",this.container.style.transform),this.log("Container position:",this.container.getBoundingClientRect())}),100),this.enableCloseButton())}createContainer(){const t=document.createElement("div");t.className="pp-anchor-container";const n=this.config.width||770,e=this.config.height||250;t.style.cssText=`\n      position: fixed !important;\n      bottom: 0 !important;\n      left: 50% !important;\n      transform: translate(-50%, 100%) !important;\n      width: ${n}px !important;\n      height: ${e}px !important;\n      max-width: 100vw !important;\n      border: none !important;\n      border-radius: 0 !important;\n      box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.15) !important;\n      z-index: 999999998 !important;\n      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;\n      overflow: hidden !important;\n      padding: 0 !important;\n      margin: 0 !important;\n    `,window.innerWidth<800&&(t.style.width="100vw !important"),this.container=t}createCloseButton(){const t=document.createElement("button");t.className="pp-anchor-close",t.setAttribute("aria-label","Close ad");const n=this.config.closeDelay||10;t.innerHTML=`<span style="font-size: 10px; color: #999;">${n}</span>`,t.disabled=!0,t.style.cssText="\n      position: absolute !important;\n      top: 4px !important;\n      right: 4px !important;\n      width: 22px !important;\n      height: 22px !important;\n      background: #fff !important;\n      border: 1px solid #ccc !important;\n      border-radius: 3px !important;\n      color: #666 !important;\n      cursor: not-allowed !important;\n      font-size: 14px !important;\n      font-weight: bold !important;\n      line-height: 20px !important;\n      padding: 0 !important;\n      z-index: 999999999 !important;\n      transition: all 0.2s ease !important;\n      display: flex !important;\n      align-items: center !important;\n      justify-content: center !important;\n      font-family: Arial, sans-serif !important;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;\n    ",t.addEventListener("click",(n=>{n.preventDefault(),n.stopPropagation(),t.disabled||this.close()})),this.closeBtn=t,this.container.appendChild(t)}createIframe(){const t=document.createElement("iframe");t.src=this.config.url,t.className="pp-anchor-iframe",t.style.cssText="\n      position: static !important;\n      top: auto !important;\n      left: auto !important;\n      right: auto !important;\n      bottom: auto !important;\n      transform: none !important;\n      width: 100% !important;\n      height: 100% !important;\n      border: none !important;\n      border-radius: 0 !important;\n      display: block !important;\n      margin: 0 !important;\n      padding: 0 !important;\n      vertical-align: bottom !important;\n      z-index: auto !important;\n    ",t.setAttribute("allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"),t.setAttribute("loading","lazy"),this.container.appendChild(t)}enableCloseButton(){const t=this.config.closeDelay||10;let n=t;this.log(`Close button will be enabled in ${t} seconds`);const e=setInterval((()=>{n--,n>0?this.closeBtn.innerHTML=`<span style="font-size: 10px; color: #999;">${n}</span>`:(clearInterval(e),this.closeBtn.innerHTML="âœ•",this.closeBtn.disabled=!1,this.closeBtn.style.setProperty("cursor","pointer","important"),this.closeBtn.style.setProperty("color","#333","important"),this.closeBtn.style.setProperty("border-color","#999","important"),this.closeBtn.addEventListener("mouseenter",(()=>{this.closeBtn.style.setProperty("background","#f5f5f5","important"),this.closeBtn.style.setProperty("color","#000","important"),this.closeBtn.style.setProperty("border-color","#666","important")})),this.closeBtn.addEventListener("mouseleave",(()=>{this.closeBtn.style.setProperty("background","#fff","important"),this.closeBtn.style.setProperty("color","#333","important"),this.closeBtn.style.setProperty("border-color","#999","important")})),this.log("Close button enabled"))}),1e3)}close(){this.log("Closing anchor ad"),this.container.style.setProperty("transform","translate(-50%, 100%)","important"),setTimeout((()=>{this.container&&this.container.parentNode&&(this.container.parentNode.removeChild(this.container),this.isVisible=!1,this.log("Anchor ad removed"),this.showCornerButton())}),400)}showCornerButton(){this.log("Creating corner button");const t=document.createElement("button");t.className="pp-corner-button",t.textContent="Play Game",t.setAttribute("aria-label","Play Game");const n=Object.entries(this.bannerPosition).map((([t,n])=>`${t}: ${n} !important`)).join("; ");t.style.cssText=`\n      position: fixed !important;\n      ${n};\n      background: linear-gradient(180deg, #ffd700 0%, #ffb300 100%) !important;\n      color: #1a1a1a !important;\n      border: 2px solid #996600 !important;\n      border-radius: 8px !important;\n      padding: 6px 12px !important;\n      font-size: 11px !important;\n      font-weight: 900 !important;\n      text-transform: uppercase !important;\n      letter-spacing: 0.5px !important;\n      cursor: pointer !important;\n      z-index: 999999997 !important;\n      box-shadow: 0 3px 0 #996600, 0 4px 8px rgba(0, 0, 0, 0.3) !important;\n      font-family: 'Arial Black', 'Arial Bold', sans-serif !important;\n      animation: pp-buzz 3s ease-in-out infinite !important;\n      transition: all 0.3s ease !important;\n      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3) !important;\n    `,t.addEventListener("click",(()=>{this.log("Corner button clicked - reopening anchor"),t.remove(),this.cornerButton=null,this.show()})),t.addEventListener("mouseenter",(()=>{t.style.setProperty("transform","translateY(-2px)","important"),t.style.setProperty("box-shadow","0 5px 0 #996600, 0 6px 12px rgba(0, 0, 0, 0.4)","important")})),t.addEventListener("mouseleave",(()=>{t.style.setProperty("transform","translateY(0)","important"),t.style.setProperty("box-shadow","0 3px 0 #996600, 0 4px 8px rgba(0, 0, 0, 0.3)","important")})),t.addEventListener("mousedown",(()=>{t.style.setProperty("transform","translateY(1px)","important"),t.style.setProperty("box-shadow","0 2px 0 #996600, 0 3px 6px rgba(0, 0, 0, 0.2)","important")})),t.addEventListener("mouseup",(()=>{t.style.setProperty("transform","translateY(-2px)","important"),t.style.setProperty("box-shadow","0 5px 0 #996600, 0 6px 12px rgba(0, 0, 0, 0.4)","important")})),document.body.appendChild(t),this.cornerButton=t,this.log("Corner button displayed")}}const n=()=>{if(document.getElementById("pp-anchor-styles"))return;const t=document.createElement("style");t.id="pp-anchor-styles",t.textContent="\n    @media (max-width: 799px) {\n      .pp-anchor-container {\n        border-radius: 0 !important;\n      }\n    }\n\n    @keyframes pp-buzz {\n      0%, 100% {\n        transform: translateX(0) scale(1);\n      }\n      10%, 30%, 50% {\n        transform: translateX(-2px) scale(1);\n      }\n      20%, 40% {\n        transform: translateX(2px) scale(1);\n      }\n      60% {\n        transform: translateX(0) scale(1.05);\n      }\n      65% {\n        transform: translateX(0) scale(1);\n      }\n    }\n  ",document.head.appendChild(t)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n();const e={url:"https://colormagic.app/color-match-captcha?ref=themarzlibrary.org",width:300,height:401,closeDelay:10},o={top:"52px",right:"20px"};if(function(t){if(!t||!Array.isArray(t)||0===t.length)return!1;const n=window.location.hostname.toLowerCase();return t.some((t=>{const e=t.toLowerCase().trim();if(e.startsWith("*.")){const t=e.substring(2);return!!n.endsWith("."+t)}return n===e||!!n.endsWith("."+e)}))}(["themarzlibrary.org"]));else{let n=function(){if(e){new t(e,o||{bottom:"8px",right:"8px"},false).show()}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{n()})):n()}}();
