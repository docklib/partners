var PartnerLauncher=function(){"use strict";const t="1.0.0",n="pp_launcher_installed",e="pp_launcher_version",a="pp_launcher_config",i="pp_launcher_presets",r="pp_launcher_position",o={version:t,enabled:!0,features:{overlay:{enabled:!1,links:[{link:"https://example.com/1",text:"Example Link 1"},{link:"https://example.com/2",text:"Example Link 2"}],cookieTracking:!1,direct:!1},banner:{enabled:!1,banners:[],iframeBanners:[],showIframeBanner:!0,position:{bottom:"8px",right:"8px"},maxBanners:2},popup:{enabled:!1,urls:[],delay:5e3,closeDelay:10},anchor:{enabled:!1,config:{url:"",width:770,height:250,closeDelay:10},delay:3e3}},debug:!0,analytics:{enabled:!1,domain:""},excludeDomains:[]},s=[{name:"Default (Clean)",description:"All features disabled",config:o},{name:"Full Demo",description:"All features enabled with example data",config:{...o,features:{overlay:{enabled:!0,links:[{link:"https://colormagic.app/shadow",text:"Color Magic Premium"},{link:"https://fontgenerator.cc",text:"Font Generator Pro"}],cookieTracking:!0,direct:!1},banner:{enabled:!0,banners:[],iframeBanners:[{src:"https://example.com/banner",width:300,height:250}],showIframeBanner:!0,position:{bottom:"8px",right:"8px"},maxBanners:2},popup:{enabled:!0,urls:["https://example.com/popup"],delay:5e3,closeDelay:10},anchor:{enabled:!0,config:{url:"https://example.com/anchor",width:770,height:250,closeDelay:10},delay:3e3}}}},{name:"Banner Only",description:"Just banner ads",config:{...o,features:{...o.features,banner:{enabled:!0,banners:[],iframeBanners:[{src:"https://example.com/banner",width:300,height:250}],showIframeBanner:!0,position:{bottom:"8px",right:"8px"},maxBanners:2}}}},{name:"Overlay + Anchor",description:"Full-page overlay with anchor ad",config:{...o,features:{...o.features,overlay:{enabled:!0,links:[{link:"https://example.com/1",text:"Link 1"},{link:"https://example.com/2",text:"Link 2"}],cookieTracking:!0,direct:!1},anchor:{enabled:!0,config:{url:"https://example.com/anchor",width:770,height:250,closeDelay:10},delay:3e3}}}}];class p{constructor(){this.config=this.load(),this.listeners=[]}load(){try{const t=localStorage.getItem(a);if(t){const n=JSON.parse(t);return this.mergeWithDefaults(n)}}catch(t){console.error("[Launcher Config] Failed to load config:",t)}return this.deepClone(o)}save(){try{return localStorage.setItem(a,JSON.stringify(this.config)),localStorage.setItem(e,t),this.notifyListeners(),!0}catch(n){return console.error("[Launcher Config] Failed to save config:",n),!1}}get(){return this.deepClone(this.config)}set(t){return this.config=this.mergeWithDefaults(t),this.save()}update(t,n){const e=t.split(".");let a=this.config;for(let i=0;i<e.length-1;i++)a[e[i]]||(a[e[i]]={}),a=a[e[i]];return a[e[e.length-1]]=n,this.save()}reset(){return this.config=this.deepClone(o),this.save()}export(){return JSON.stringify(this.config,null,2)}import(t){try{const n=JSON.parse(t);return this.config=this.mergeWithDefaults(n),this.save()}catch(n){return console.error("[Launcher Config] Failed to import config:",n),!1}}getPresets(){const t=this.getCustomPresets();return[...s,...t]}getCustomPresets(){try{const t=localStorage.getItem(i);return t?JSON.parse(t):[]}catch(t){return console.error("[Launcher Config] Failed to load presets:",t),[]}}savePreset(t,n=""){const e=this.getCustomPresets();e.push({name:t,description:n,config:this.deepClone(this.config),created:(new Date).toISOString()});try{return localStorage.setItem(i,JSON.stringify(e)),!0}catch(a){return console.error("[Launcher Config] Failed to save preset:",a),!1}}loadPreset(t){const n=this.getPresets().find((n=>n.name===t));return!!n&&(this.config=this.deepClone(n.config),this.save())}deletePreset(t){const n=this.getCustomPresets().filter((n=>n.name!==t));try{return localStorage.setItem(i,JSON.stringify(n)),!0}catch(e){return console.error("[Launcher Config] Failed to delete preset:",e),!1}}isInstalled(){return"true"===localStorage.getItem(n)}markInstalled(){localStorage.setItem(n,"true"),localStorage.setItem(e,t)}markUninstalled(){localStorage.removeItem(n)}getPosition(){try{const t=localStorage.getItem(r);return t?JSON.parse(t):{x:20,y:20}}catch(t){return{x:20,y:20}}}savePosition(t,n){try{return localStorage.setItem(r,JSON.stringify({x:t,y:n})),!0}catch(e){return console.error("[Launcher Config] Failed to save position:",e),!1}}onChange(t){this.listeners.push(t)}offChange(t){this.listeners=this.listeners.filter((n=>n!==t))}notifyListeners(){this.listeners.forEach((t=>{try{t(this.get())}catch(n){console.error("[Launcher Config] Listener error:",n)}}))}mergeWithDefaults(t){return this.deepMerge(this.deepClone(o),t)}deepMerge(t,n){const e={...t};return this.isObject(t)&&this.isObject(n)&&Object.keys(n).forEach((a=>{this.isObject(n[a])?e[a]=a in t?this.deepMerge(t[a],n[a]):n[a]:e[a]=n[a]})),e}deepClone(t){return JSON.parse(JSON.stringify(t))}isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}validate(t){return!(!t||"object"!=typeof t)&&!(!t.version||!t.features)}}class l{constructor(t,n){this.launcher=t,this.config=n,this.isOpen=!1,this.triggerButton=null,this.panel=null,this.isDragging=!1,this.createStyles(),this.createTriggerButton(),this.createPanel(),this.config.onChange((()=>this.updateUI())),document.addEventListener("keydown",(t=>{t.ctrlKey&&t.shiftKey&&"L"===t.key&&(t.preventDefault(),this.toggle())}))}createStyles(){if(document.getElementById("pp-launcher-styles"))return;const t=document.createElement("style");t.id="pp-launcher-styles",t.textContent="\n      .pp-launcher-trigger {\n        position: fixed !important;\n        bottom: 20px !important;\n        left: 20px !important;\n        width: 56px !important;\n        height: 56px !important;\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\n        border: none !important;\n        border-radius: 50% !important;\n        cursor: move !important;\n        z-index: 999999997 !important;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: center !important;\n        font-size: 24px !important;\n        transition: all 0.3s ease !important;\n        color: white !important;\n      }\n\n      .pp-launcher-trigger:hover {\n        transform: scale(1.1) !important;\n        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4) !important;\n      }\n\n      .pp-launcher-trigger.active {\n        animation: pp-launcher-pulse 2s ease-in-out infinite !important;\n      }\n\n      .pp-launcher-badge {\n        position: absolute !important;\n        top: -4px !important;\n        right: -4px !important;\n        background: #ff4444 !important;\n        color: white !important;\n        font-size: 11px !important;\n        font-weight: bold !important;\n        padding: 2px 6px !important;\n        border-radius: 10px !important;\n        min-width: 18px !important;\n        text-align: center !important;\n      }\n\n      .pp-launcher-panel {\n        position: fixed !important;\n        top: 0 !important;\n        left: 0 !important;\n        width: 400px !important;\n        max-width: 90vw !important;\n        height: 100vh !important;\n        background: #1a1a1a !important;\n        color: #ffffff !important;\n        z-index: 999999998 !important;\n        transform: translateX(-100%) !important;\n        transition: transform 0.3s ease !important;\n        box-shadow: 2px 0 12px rgba(0, 0, 0, 0.5) !important;\n        display: flex !important;\n        flex-direction: column !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      }\n\n      .pp-launcher-panel.open {\n        transform: translateX(0) !important;\n      }\n\n      .pp-launcher-header {\n        padding: 20px !important;\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: space-between !important;\n        flex-shrink: 0 !important;\n      }\n\n      .pp-launcher-title {\n        font-size: 18px !important;\n        font-weight: 600 !important;\n        margin: 0 !important;\n        display: flex !important;\n        align-items: center !important;\n        gap: 8px !important;\n      }\n\n      .pp-launcher-version {\n        font-size: 11px !important;\n        opacity: 0.8 !important;\n        margin-left: 8px !important;\n      }\n\n      .pp-launcher-close {\n        background: rgba(255, 255, 255, 0.2) !important;\n        border: none !important;\n        color: white !important;\n        width: 32px !important;\n        height: 32px !important;\n        border-radius: 6px !important;\n        cursor: pointer !important;\n        font-size: 20px !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: center !important;\n        transition: all 0.2s ease !important;\n      }\n\n      .pp-launcher-close:hover {\n        background: rgba(255, 255, 255, 0.3) !important;\n      }\n\n      .pp-launcher-content {\n        flex: 1 !important;\n        overflow-y: auto !important;\n        padding: 20px !important;\n      }\n\n      .pp-launcher-section {\n        margin-bottom: 24px !important;\n        padding-bottom: 24px !important;\n        border-bottom: 1px solid #333 !important;\n      }\n\n      .pp-launcher-section:last-child {\n        border-bottom: none !important;\n      }\n\n      .pp-launcher-section-title {\n        font-size: 14px !important;\n        font-weight: 600 !important;\n        margin: 0 0 12px 0 !important;\n        color: #667eea !important;\n        display: flex !important;\n        align-items: center !important;\n        gap: 8px !important;\n      }\n\n      .pp-launcher-toggle {\n        display: flex !important;\n        align-items: center !important;\n        justify-content: space-between !important;\n        padding: 12px !important;\n        background: #2a2a2a !important;\n        border-radius: 8px !important;\n        margin-bottom: 12px !important;\n      }\n\n      .pp-launcher-toggle-label {\n        font-size: 13px !important;\n        font-weight: 500 !important;\n      }\n\n      .pp-launcher-switch {\n        position: relative !important;\n        width: 48px !important;\n        height: 24px !important;\n        background: #444 !important;\n        border-radius: 12px !important;\n        cursor: pointer !important;\n        transition: background 0.3s ease !important;\n      }\n\n      .pp-launcher-switch.active {\n        background: #667eea !important;\n      }\n\n      .pp-launcher-switch::after {\n        content: '' !important;\n        position: absolute !important;\n        top: 2px !important;\n        left: 2px !important;\n        width: 20px !important;\n        height: 20px !important;\n        background: white !important;\n        border-radius: 50% !important;\n        transition: transform 0.3s ease !important;\n      }\n\n      .pp-launcher-switch.active::after {\n        transform: translateX(24px) !important;\n      }\n\n      .pp-launcher-button {\n        width: 100% !important;\n        padding: 10px 16px !important;\n        background: #667eea !important;\n        border: none !important;\n        color: white !important;\n        font-size: 13px !important;\n        font-weight: 600 !important;\n        border-radius: 6px !important;\n        cursor: pointer !important;\n        transition: all 0.2s ease !important;\n        margin-top: 8px !important;\n      }\n\n      .pp-launcher-button:hover {\n        background: #5568d3 !important;\n        transform: translateY(-1px) !important;\n      }\n\n      .pp-launcher-button.secondary {\n        background: #444 !important;\n      }\n\n      .pp-launcher-button.secondary:hover {\n        background: #555 !important;\n      }\n\n      .pp-launcher-button.danger {\n        background: #ff4444 !important;\n      }\n\n      .pp-launcher-button.danger:hover {\n        background: #ee3333 !important;\n      }\n\n      .pp-launcher-input {\n        width: 100% !important;\n        padding: 10px !important;\n        background: #2a2a2a !important;\n        border: 1px solid #444 !important;\n        border-radius: 6px !important;\n        color: white !important;\n        font-size: 13px !important;\n        margin-top: 8px !important;\n        box-sizing: border-box !important;\n      }\n\n      .pp-launcher-input:focus {\n        outline: none !important;\n        border-color: #667eea !important;\n      }\n\n      .pp-launcher-footer {\n        padding: 16px 20px !important;\n        background: #0f0f0f !important;\n        border-top: 1px solid #333 !important;\n        display: flex !important;\n        gap: 8px !important;\n        flex-shrink: 0 !important;\n      }\n\n      .pp-launcher-stats {\n        font-size: 12px !important;\n        padding: 12px !important;\n        background: #2a2a2a !important;\n        border-radius: 6px !important;\n        margin-top: 8px !important;\n      }\n\n      .pp-launcher-stats-row {\n        display: flex !important;\n        justify-content: space-between !important;\n        padding: 4px 0 !important;\n      }\n\n      @keyframes pp-launcher-pulse {\n        0%, 100% {\n          box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n        }\n        50% {\n          box-shadow: 0 4px 20px rgba(102, 126, 234, 0.6);\n        }\n      }\n\n      @media (max-width: 768px) {\n        .pp-launcher-panel {\n          width: 100vw !important;\n          max-width: 100vw !important;\n        }\n      }\n    ",document.head.appendChild(t)}createTriggerButton(){const t=document.createElement("button");t.className="pp-launcher-trigger",t.innerHTML="‚öôÔ∏è",t.setAttribute("aria-label","Open Partner Launcher"),t.title="Partner Launcher (Ctrl+Shift+L)";const n=this.config.getPosition();let e,a,i,r;t.style.left=`${n.x}px`,t.style.bottom=`${n.y}px`,t.addEventListener("click",(t=>{this.isDragging||this.toggle()})),t.addEventListener("mousedown",(n=>{if(0!==n.button)return;this.isDragging=!1,e=n.clientX,a=n.clientY,i=parseInt(t.style.left),r=parseInt(t.style.bottom);const o=n=>{const o=n.clientX-e,s=a-n.clientY;if((Math.abs(o)>5||Math.abs(s)>5)&&(this.isDragging=!0),this.isDragging){const n=Math.max(0,Math.min(window.innerWidth-56,i+o)),e=Math.max(0,Math.min(window.innerHeight-56,r+s));t.style.left=`${n}px`,t.style.bottom=`${e}px`}},s=()=>{if(document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s),this.isDragging){const n=parseInt(t.style.left),e=parseInt(t.style.bottom);this.config.savePosition(n,e)}setTimeout((()=>{this.isDragging=!1}),100)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",s)}));const o=document.createElement("span");o.className="pp-launcher-badge",o.textContent="0",o.style.display="none",t.appendChild(o),document.body.appendChild(t),this.triggerButton=t,this.updateBadge()}updateBadge(){const t=this.config.get();let n=0;t.features.overlay.enabled&&n++,t.features.banner.enabled&&n++,t.features.popup.enabled&&n++,t.features.anchor.enabled&&n++;const e=this.triggerButton.querySelector(".pp-launcher-badge");e.textContent=n,e.style.display=n>0?"block":"none",n>0?this.triggerButton.classList.add("active"):this.triggerButton.classList.remove("active")}createPanel(){const t=document.createElement("div");t.className="pp-launcher-panel",t.innerHTML=`\n      <div class="pp-launcher-header">\n        <div class="pp-launcher-title">\n          üöÄ Partner Launcher\n          <span class="pp-launcher-version">v${this.launcher.version}</span>\n        </div>\n        <button class="pp-launcher-close">‚úï</button>\n      </div>\n      <div class="pp-launcher-content">\n        ${this.renderContent()}\n      </div>\n      <div class="pp-launcher-footer">\n        <button class="pp-launcher-button secondary" data-action="reset">Reset</button>\n        <button class="pp-launcher-button secondary" data-action="export">Export</button>\n        <button class="pp-launcher-button danger" data-action="uninstall">Uninstall</button>\n      </div>\n    `,t.querySelector(".pp-launcher-close").addEventListener("click",(()=>this.close())),t.querySelectorAll("[data-toggle]").forEach((t=>{t.addEventListener("click",(()=>{const n=t.dataset.toggle,e=this.getConfigValue(n);this.setConfigValue(n,!e),this.updateUI()}))})),t.querySelector('[data-action="reset"]').addEventListener("click",(()=>{confirm("Reset to default configuration?")&&(this.config.reset(),this.updateUI(),this.launcher.reload())})),t.querySelector('[data-action="export"]').addEventListener("click",(()=>{const t=this.config.export();navigator.clipboard.writeText(t).then((()=>{alert("Configuration copied to clipboard!")}))})),t.querySelector('[data-action="uninstall"]').addEventListener("click",(async()=>{confirm("Uninstall Partner Launcher? This will remove all data and require a page reload.")&&(await this.launcher.uninstall(),alert("Launcher uninstalled. Reload the page to complete removal."))})),t.querySelectorAll("[data-test]").forEach((t=>{t.addEventListener("click",(()=>{const n=t.dataset.test;this.testFeature(n)}))})),document.body.appendChild(t),this.panel=t}renderLinkList(t,n){return t&&0!==t.length?t.map(((t,e)=>`\n      <div style="display: flex; gap: 8px; align-items: center; margin-top: 8px; padding: 8px; background: #2a2a2a; border-radius: 4px;">\n        <div style="flex: 1; font-size: 12px; color: #fff; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">\n          ${t.link}\n        </div>\n        <button class="pp-launcher-button secondary" data-action="delete-${n}-link" data-index="${e}" style="padding: 4px 8px; margin: 0; font-size: 11px;">Delete</button>\n      </div>\n    `)).join(""):'<p style="font-size: 12px; color: #666; margin: 8px 0;">No links added</p>'}renderBannerList(t,n){return t&&0!==t.length?t.map(((t,e)=>`\n      <div style="display: flex; gap: 8px; align-items: center; margin-top: 8px; padding: 8px; background: #2a2a2a; border-radius: 4px;">\n        <div style="flex: 1; font-size: 11px; color: #fff;">\n          <div style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${t.src}</div>\n          <div style="color: #999; margin-top: 4px;">${t.width}x${t.height}</div>\n        </div>\n        <button class="pp-launcher-button secondary" data-action="edit-${n}" data-index="${e}" style="padding: 4px 8px; margin: 0; font-size: 11px;">Edit</button>\n        <button class="pp-launcher-button secondary" data-action="delete-${n}" data-index="${e}" style="padding: 4px 8px; margin: 0; font-size: 11px;">Delete</button>\n      </div>\n    `)).join(""):'<p style="font-size: 12px; color: #666; margin: 8px 0;">No banners added</p>'}renderPopupList(t,n){return t&&0!==t.length?t.map(((t,e)=>`\n      <div style="display: flex; gap: 8px; align-items: center; margin-top: 8px; padding: 8px; background: #2a2a2a; border-radius: 4px;">\n        <div style="flex: 1; font-size: 12px; color: #fff; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">\n          ${t}\n        </div>\n        <button class="pp-launcher-button secondary" data-action="delete-${n}" data-index="${e}" style="padding: 4px 8px; margin: 0; font-size: 11px;">Delete</button>\n      </div>\n    `)).join(""):'<p style="font-size: 12px; color: #666; margin: 8px 0;">No URLs added</p>'}renderContent(){const t=this.config.get();return`\n      \x3c!-- Master Toggle --\x3e\n      <div class="pp-launcher-section">\n        <div class="pp-launcher-toggle" data-toggle="enabled">\n          <span class="pp-launcher-toggle-label">üéØ Master Enable</span>\n          <div class="pp-launcher-switch ${t.enabled?"active":""}"></div>\n        </div>\n      </div>\n\n      \x3c!-- Overlay Feature --\x3e\n      <div class="pp-launcher-section">\n        <h3 class="pp-launcher-section-title">üì∫ Full-Page Overlay</h3>\n        <div class="pp-launcher-toggle" data-toggle="features.overlay.enabled">\n          <span class="pp-launcher-toggle-label">Enable Overlay</span>\n          <div class="pp-launcher-switch ${t.features.overlay.enabled?"active":""}"></div>\n        </div>\n\n        <div style="margin-top: 12px;">\n          <strong style="font-size: 12px; color: #999;">Overlay Links (${t.features.overlay.links.length})</strong>\n          ${this.renderLinkList(t.features.overlay.links,"overlay")}\n          <button class="pp-launcher-button secondary" data-action="add-overlay-link">+ Add Link</button>\n        </div>\n\n        <button class="pp-launcher-button" data-test="overlay" style="margin-top: 12px;">Test Overlay</button>\n      </div>\n\n      \x3c!-- Banner Feature --\x3e\n      <div class="pp-launcher-section">\n        <h3 class="pp-launcher-section-title">üé™ Banner Ads</h3>\n        <div class="pp-launcher-toggle" data-toggle="features.banner.enabled">\n          <span class="pp-launcher-toggle-label">Enable Banners</span>\n          <div class="pp-launcher-switch ${t.features.banner.enabled?"active":""}"></div>\n        </div>\n\n        <div style="margin-top: 12px;">\n          <strong style="font-size: 12px; color: #999;">Iframe Banners (${t.features.banner.iframeBanners.length})</strong>\n          ${this.renderBannerList(t.features.banner.iframeBanners,"banner")}\n          <button class="pp-launcher-button secondary" data-action="add-banner">+ Add Banner</button>\n        </div>\n\n        <button class="pp-launcher-button" data-test="banner" style="margin-top: 12px;">Test Banner</button>\n      </div>\n\n      \x3c!-- Popup Feature --\x3e\n      <div class="pp-launcher-section">\n        <h3 class="pp-launcher-section-title">ü™ü Full-Screen Popup</h3>\n        <div class="pp-launcher-toggle" data-toggle="features.popup.enabled">\n          <span class="pp-launcher-toggle-label">Enable Popup</span>\n          <div class="pp-launcher-switch ${t.features.popup.enabled?"active":""}"></div>\n        </div>\n\n        <div style="margin-top: 12px;">\n          <strong style="font-size: 12px; color: #999;">Popup URLs (${t.features.popup.urls.length})</strong>\n          ${this.renderPopupList(t.features.popup.urls,"popup")}\n          <button class="pp-launcher-button secondary" data-action="add-popup">+ Add URL</button>\n        </div>\n\n        <button class="pp-launcher-button" data-test="popup" style="margin-top: 12px;">Test Popup</button>\n      </div>\n\n      \x3c!-- Anchor Feature --\x3e\n      <div class="pp-launcher-section">\n        <h3 class="pp-launcher-section-title">‚öì Anchor Ad</h3>\n        <div class="pp-launcher-toggle" data-toggle="features.anchor.enabled">\n          <span class="pp-launcher-toggle-label">Enable Anchor</span>\n          <div class="pp-launcher-switch ${t.features.anchor.enabled?"active":""}"></div>\n        </div>\n\n        <div style="margin-top: 12px;">\n          <input\n            type="text"\n            class="pp-launcher-input"\n            placeholder="Anchor URL"\n            value="${t.features.anchor.config.url||""}"\n            data-anchor-field="url"\n          />\n          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">\n            <input\n              type="number"\n              class="pp-launcher-input"\n              placeholder="Width (px)"\n              value="${t.features.anchor.config.width||770}"\n              data-anchor-field="width"\n            />\n            <input\n              type="number"\n              class="pp-launcher-input"\n              placeholder="Height (px)"\n              value="${t.features.anchor.config.height||250}"\n              data-anchor-field="height"\n            />\n          </div>\n        </div>\n\n        <button class="pp-launcher-button" data-test="anchor" style="margin-top: 12px;">Test Anchor</button>\n      </div>\n\n      \x3c!-- Debug Mode --\x3e\n      <div class="pp-launcher-section">\n        <h3 class="pp-launcher-section-title">üêõ Debug Mode</h3>\n        <div class="pp-launcher-toggle" data-toggle="debug">\n          <span class="pp-launcher-toggle-label">Enable Debug Logging</span>\n          <div class="pp-launcher-switch ${t.debug?"active":""}"></div>\n        </div>\n      </div>\n\n      \x3c!-- Statistics --\x3e\n      <div class="pp-launcher-section">\n        <h3 class="pp-launcher-section-title">üìä Statistics</h3>\n        <div class="pp-launcher-stats">\n          ${this.renderStats()}\n        </div>\n        <button class="pp-launcher-button secondary" data-action="reset-stats">Reset Stats</button>\n      </div>\n    `}renderStats(){const t=this.launcher.getStats();return`\n      <div class="pp-launcher-stats-row">\n        <span>Overlay Clicks:</span>\n        <span>${t.overlayClicks}</span>\n      </div>\n      <div class="pp-launcher-stats-row">\n        <span>Banner Impressions:</span>\n        <span>${t.bannerImpressions}</span>\n      </div>\n      <div class="pp-launcher-stats-row">\n        <span>Popup Shows:</span>\n        <span>${t.popupShows}</span>\n      </div>\n      <div class="pp-launcher-stats-row">\n        <span>Anchor Shows:</span>\n        <span>${t.anchorShows}</span>\n      </div>\n      <div class="pp-launcher-stats-row">\n        <span>Last Activity:</span>\n        <span>${t.lastActivity?new Date(t.lastActivity).toLocaleTimeString():"N/A"}</span>\n      </div>\n    `}updateUI(){if(!this.panel)return;this.panel.querySelector(".pp-launcher-content").innerHTML=this.renderContent(),this.attachEventListeners(),this.updateBadge()}attachEventListeners(){this.panel.querySelectorAll("[data-toggle]").forEach((t=>{t.addEventListener("click",(()=>{const n=t.dataset.toggle,e=this.getConfigValue(n);this.setConfigValue(n,!e),this.updateUI()}))})),this.panel.querySelectorAll("[data-test]").forEach((t=>{t.addEventListener("click",(()=>{const n=t.dataset.test;this.testFeature(n)}))}));const t=this.panel.querySelector('[data-action="reset-stats"]');t&&t.addEventListener("click",(()=>{this.launcher.resetStats(),this.updateUI()}));const n=this.panel.querySelector('[data-action="add-overlay-link"]');n&&n.addEventListener("click",(()=>this.addOverlayLink())),this.panel.querySelectorAll('[data-action="delete-overlay-link"]').forEach((t=>{t.addEventListener("click",(()=>{const n=parseInt(t.dataset.index);this.deleteOverlayLink(n)}))}));const e=this.panel.querySelector('[data-action="add-banner"]');e&&e.addEventListener("click",(()=>this.addBanner())),this.panel.querySelectorAll('[data-action="edit-banner"]').forEach((t=>{t.addEventListener("click",(()=>{const n=parseInt(t.dataset.index);this.editBanner(n)}))})),this.panel.querySelectorAll('[data-action="delete-banner"]').forEach((t=>{t.addEventListener("click",(()=>{const n=parseInt(t.dataset.index);this.deleteBanner(n)}))}));const a=this.panel.querySelector('[data-action="add-popup"]');a&&a.addEventListener("click",(()=>this.addPopupUrl())),this.panel.querySelectorAll('[data-action="delete-popup"]').forEach((t=>{t.addEventListener("click",(()=>{const n=parseInt(t.dataset.index);this.deletePopupUrl(n)}))})),this.panel.querySelectorAll("[data-anchor-field]").forEach((t=>{t.addEventListener("change",(t=>{const n=t.target.dataset.anchorField,e="url"===n?t.target.value:parseInt(t.target.value)||0;this.config.update(`features.anchor.config.${n}`,e)})),t.addEventListener("blur",(t=>{const n=t.target.dataset.anchorField,e="url"===n?t.target.value:parseInt(t.target.value)||0;this.config.update(`features.anchor.config.${n}`,e)}))}))}addOverlayLink(){const t=prompt("Enter overlay link URL:");if(t){const n=prompt("Enter link description (optional):")||t,e=this.config.get();e.features.overlay.links.push({link:t,text:n}),this.config.set(e),this.updateUI()}}deleteOverlayLink(t){if(confirm("Delete this overlay link?")){const n=this.config.get();n.features.overlay.links.splice(t,1),this.config.set(n),this.updateUI()}}addBanner(){const t=prompt("Enter iframe banner URL:");if(t){const n=parseInt(prompt("Enter width (px):","300"))||300,e=parseInt(prompt("Enter height (px):","250"))||250,a=this.config.get();a.features.banner.iframeBanners.push({src:t,width:n,height:e}),this.config.set(a),this.updateUI()}}editBanner(t){const n=this.config.get(),e=n.features.banner.iframeBanners[t];if(!e)return;const a=prompt("Enter iframe banner URL:",e.src);if(null===a)return;const i=parseInt(prompt("Enter width (px):",e.width))||e.width,r=parseInt(prompt("Enter height (px):",e.height))||e.height;n.features.banner.iframeBanners[t]={src:a,width:i,height:r},this.config.set(n),this.updateUI()}deleteBanner(t){if(confirm("Delete this banner?")){const n=this.config.get();n.features.banner.iframeBanners.splice(t,1),this.config.set(n),this.updateUI()}}addPopupUrl(){const t=prompt("Enter popup URL:");if(t){const n=this.config.get();n.features.popup.urls.push(t),this.config.set(n),this.updateUI()}}deletePopupUrl(t){if(confirm("Delete this popup URL?")){const n=this.config.get();n.features.popup.urls.splice(t,1),this.config.set(n),this.updateUI()}}getConfigValue(t){const n=this.config.get(),e=t.split(".");let a=n;for(const i of e)if(a=a[i],void 0===a)return null;return a}setConfigValue(t,n){this.config.update(t,n)}testFeature(t){switch(this.launcher.log(`Testing feature: ${t}`),t){case"overlay":this.launcher.showOverlay();break;case"banner":this.launcher.showBanner();break;case"popup":this.launcher.showPopup();break;case"anchor":this.launcher.showAnchor()}}open(){this.isOpen=!0,this.panel.classList.add("open")}close(){this.isOpen=!1,this.panel.classList.remove("open")}toggle(){this.isOpen?this.close():this.open()}destroy(){this.triggerButton&&(this.triggerButton.remove(),this.triggerButton=null),this.panel&&(this.panel.remove(),this.panel=null)}}class c{constructor(t,n,e=!0,a={bottom:"20px",right:"20px"},i=!1,r=2){this.banners=t,this.iframeBanners=n,this.showIframeBanner=e,this.position=a,this.debug=i,this.bannerCount=0,this.maxBanners=r,this.currentBannerElement=null,this.autoCloseTimer=null,this.log("Banner initialized with debug mode enabled"),this.log("Banners:",this.banners),this.log("iframeBanners:",this.iframeBanners),this.allBanners=[...this.banners],this.iframeBanners&&this.iframeBanners.length>0&&this.showIframeBanner&&this.iframeBanners.forEach((t=>{this.allBanners.push({type:"iframe",...t})})),this.currentBanner=this.getRandomBanner(),this.log("Selected banner:",this.currentBanner),this.createStyles(),this.renderBanner()}log(...t){if(this.debug){const n=(new Date).toISOString().split("T")[1].slice(0,-1);console.log(`[Banner Debug ${n}]`,...t)}}getRandomBanner(){const t=this.allBanners[Math.floor(Math.random()*this.allBanners.length)];return this.log("Random banner selected:",t),t}getRandomIframeBanner(){const t=this.iframeBanners.map((t=>({type:"iframe",...t})));let n=t;this.currentBanner&&"iframe"===this.currentBanner.type&&(n=t.filter((t=>t.src!==this.currentBanner.src)),0===n.length&&(n=t));const e=n[Math.floor(Math.random()*n.length)];return this.log("Random iframe banner selected:",e),e}getRandomDelay(){return Math.floor(5e3*Math.random())+1e4}extractDomain(t){try{const n=new URL(t);return`${n.protocol}//${n.host}`}catch(n){return this.log("Error extracting domain from URL:",t,n),t}}showNextBanner(t=!0){if(this.bannerCount++,this.bannerCount<this.maxBanners)if(1===this.bannerCount)if(t){const t=this.getRandomDelay();this.log(`Scheduling next iframe banner to show in ${t/1e3} seconds`),setTimeout((()=>{this.currentBanner=this.getRandomIframeBanner(),this.log("Next iframe banner selected:",this.currentBanner),this.renderBanner()}),t)}else this.log("Showing next iframe banner immediately"),this.currentBanner=this.getRandomIframeBanner(),this.log("Next iframe banner selected:",this.currentBanner),this.renderBanner();else if(t){const t=this.getRandomDelay();this.log(`Scheduling next banner to show in ${t/1e3} seconds`),setTimeout((()=>{this.currentBanner=this.getRandomBanner(),this.log("Next banner selected:",this.currentBanner),this.renderBanner()}),t)}else this.log("Showing next banner immediately"),this.currentBanner=this.getRandomBanner(),this.log("Next banner selected:",this.currentBanner),this.renderBanner();else this.log(`Maximum banner count (${this.maxBanners}) reached. No more banners will be shown.`)}createStyles(){const t=document.createElement("style"),{top:n,right:e,bottom:a,left:i}=this.position,r=`\n      ${n?`top: ${n};`:""}\n      ${e?`right: ${e};`:""}\n      ${a?`bottom: ${a};`:""}\n      ${i?`left: ${i};`:""}\n    `;t.textContent=`\n      .pp-banner-partner {\n        position: fixed !important;\n        ${r}\n        z-index: 999999 !important;\n        transition: transform 0.3s ease !important;\n        transform: translateX(120%) !important;\n      }\n      .pp-banner-partner.show {\n        transform: translateX(0) !important;\n      }\n      .pp-banner-partner img {\n        max-width: 220px !important;\n        height: auto !important;\n        overflow: hidden !important;\n        box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.4) !important;\n        transition: transform 0.3s ease !important;\n        border-radius: 10px !important;\n      }\n      .pp-banner-partner img:hover {\n        transform: scale(1.05) !important;\n      }\n      .pp-banner-close-button {\n        position: absolute !important;\n        top: -10px !important;\n        right: -10px !important;\n        width: 24px !important;\n        height: 24px !important;\n        background: #fff !important;\n        border-radius: 50% !important;\n        display: flex !important;\n        border: 1px solid rgb(143, 138, 138) !important;\n        align-items: center !important;\n        justify-content: center !important;\n        cursor: pointer !important;\n        box-shadow: 0 0 5px rgba(0,0,0,0.3) !important;\n        z-index: 1000000 !important;\n      }\n      .pp-banner-close-button::before,\n      .pp-banner-close-button::after {\n        content: '' !important;\n        position: absolute !important;\n        width: 12px !important;\n        height: 2px !important;\n        background: #333 !important;\n        transform-origin: center !important;\n      }\n      .pp-banner-close-button::before {\n        transform: rotate(45deg) !important;\n      }\n      .pp-banner-close-button::after {\n        transform: rotate(-45deg) !important;\n      }\n      .pp-banner-close-button:hover {\n        transform: scale(1.1) !important;\n      }\n      \n      /* Enhanced specificity for iframe banner */\n      div.pp-banner-iframe {\n        position: fixed !important;\n        ${r}\n        z-index: 999999 !important;\n        transition: transform 0.3s ease !important;\n        transform: translateX(120%) !important;\n        overflow: visible !important;\n        border-radius: 10px !important;\n        border: 1px solid rgb(185, 185, 185) !important;\n        box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.4) !important;\n        padding: 4px !important;\n        background: white !important;\n        /* Reset any inherited transforms */\n        top: auto !important;\n        left: auto !important;\n        ${n?`top: ${n} !important;`:""}\n        ${e?`right: ${e} !important;`:""}\n        ${a?`bottom: ${a} !important;`:""}\n        ${i?`left: ${i} !important;`:""}\n      }\n      div.pp-banner-iframe.show {\n        transform: translateX(0) !important;\n      }\n      div.pp-banner-iframe > iframe {\n        /* Complete style isolation for iframe */\n        position: static !important;\n        top: auto !important;\n        left: auto !important;\n        right: auto !important;\n        bottom: auto !important;\n        transform: none !important;\n        border: none !important;\n        border-radius: 10px !important;\n        display: block !important;\n        margin: 0 !important;\n        padding: 0 !important;\n        box-shadow: none !important;\n        opacity: 1 !important;\n        visibility: visible !important;\n        z-index: auto !important;\n        max-width: none !important;\n        max-height: none !important;\n        min-width: 0 !important;\n        min-height: 0 !important;\n      }\n      .pp-banner-hide {\n        transform: translateX(120%) !important;\n      }\n      \n      /* Additional reset rules to prevent inheritance */\n      .pp-banner-iframe,\n      .pp-banner-iframe * {\n        box-sizing: border-box !important;\n      }\n    `,document.head.appendChild(t)}renderBanner(){if(this.log("Rendering banner:",this.currentBanner),"iframe"===this.currentBanner.type?(this.log("Rendering iframe banner"),this.renderIframe(this.currentBanner)):(this.log("Rendering image banner"),this.renderImageBanner(this.currentBanner)),0===this.bannerCount&&this.maxBanners>1){const t=this.getRandomDelay();this.log(`Setting auto-close timer for ${t/1e3} seconds (first banner only)`),this.autoCloseTimer=setTimeout((()=>{this.log("Auto-closing banner due to timeout"),this.currentBannerElement&&("iframe"===this.currentBanner.type?(this.currentBannerElement.classList.remove("show"),this.currentBannerElement.style.transform="translateX(120%)"):this.currentBannerElement.classList.add("pp-banner-hide"),setTimeout((()=>{this.currentBannerElement&&(this.currentBannerElement.remove(),this.currentBannerElement=null),this.showNextBanner(!1)}),300))}),t)}else this.log("This is the second banner - no auto-close timer will be set")}renderImageBanner(t){this.log("Creating image banner element for:",t);const n=document.createElement("a");n.href=t.link,n.className="pp-banner-partner",n.target="_blank";const e=document.createElement("div");e.className="pp-banner-close-button",e.onclick=e=>{e.preventDefault(),e.stopPropagation(),this.log("Opening banner link on close:",t.link),window.open(t.link,"_blank"),n.classList.add("pp-banner-hide"),this.autoCloseTimer&&(clearTimeout(this.autoCloseTimer),this.autoCloseTimer=null),setTimeout((()=>{n.remove(),this.currentBannerElement=null,this.showNextBanner(!0)}),300)};const a=document.createElement("img");a.src=t.image,a.alt=t.text,a.title=t.text,n.appendChild(e),n.appendChild(a),document.body.appendChild(n),this.currentBannerElement=n,setTimeout((()=>{this.log("Showing image banner"),n.classList.add("show")}),1e3)}renderIframe(t){this.log("Creating iframe banner element for:",t);const n=document.createElement("div");n.className="pp-banner-iframe",n.style.cssText=`\n      position: fixed !important;\n      ${this.position.top?`top: ${this.position.top} !important;`:""}\n      ${this.position.right?`right: ${this.position.right} !important;`:""}\n      ${this.position.bottom?`bottom: ${this.position.bottom} !important;`:""}\n      ${this.position.left?`left: ${this.position.left} !important;`:""}\n      z-index: 999999 !important;\n      transition: transform 0.3s ease !important;\n      transform: translateX(120%) !important;\n    `;const e=document.createElement("div");e.className="pp-banner-close-button",e.onclick=()=>{const e=this.extractDomain(t.src);this.log("Opening iframe domain on close:",e),window.open(e,"_blank"),n.classList.remove("show"),n.style.transform="translateX(120%)",this.autoCloseTimer&&(clearTimeout(this.autoCloseTimer),this.autoCloseTimer=null),setTimeout((()=>{n.remove(),this.currentBannerElement=null,this.showNextBanner(!0)}),300)};const a=document.createElement("iframe");a.src=t.src,a.width=t.width,a.height=t.height,a.style.cssText=`\n      position: static !important;\n      border: none !important;\n      border-radius: 10px !important;\n      display: block !important;\n      margin: 0 !important;\n      padding: 0 !important;\n      transform: none !important;\n      top: auto !important;\n      left: auto !important;\n      opacity: 1 !important;\n      visibility: visible !important;\n      width: ${t.width} !important;\n      height: ${t.height} !important;\n    `,n.appendChild(e),n.appendChild(a),document.body.appendChild(n),this.currentBannerElement=n,setTimeout((()=>{this.log("Showing iframe banner"),n.classList.add("show"),n.style.transform="translateX(0)"}),1e3)}}class h{constructor(t,n=!1){this.popups=t,this.debug=n,this.closeDelay=10,this.shown=!1,this.log("Popup initialized",{popups:t})}log(...t){this.debug&&console.log(`[Partner Program Debug ${(new Date).toISOString()}]`,...t)}show(){if(this.shown||!this.popups||0===this.popups.length)return;this.shown=!0;const t=this.getRandomPopup();this.log("Showing popup with URL:",t),this.createPopup(t),this.startCloseCountdown()}getRandomPopup(){const t=Math.floor(Math.random()*this.popups.length),n=this.popups[t];return"object"==typeof n&&n.link?n.link:n}createPopup(t){this.backdrop=document.createElement("div"),this.backdrop.className="pp-popup-backdrop",this.wrapper=document.createElement("div"),this.wrapper.className="pp-popup-wrapper",this.closeBtn=document.createElement("button"),this.closeBtn.className="pp-popup-close pp-popup-close-disabled",this.closeBtn.disabled=!0,this.closeBtn.innerHTML=`\n      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <line x1="18" y1="6" x2="6" y2="18"></line>\n        <line x1="6" y1="6" x2="18" y2="18"></line>\n      </svg>\n      <span class="pp-popup-countdown">Wait <span class="pp-popup-countdown-value">${this.closeDelay}</span></span>\n    `,this.closeBtn.addEventListener("click",(()=>this.close())),this.container=document.createElement("div"),this.container.className="pp-popup-container",this.iframe=document.createElement("iframe"),this.iframe.className="pp-popup-iframe",this.iframe.src=t,this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("allow","autoplay"),this.iframe.style.cssText="\n      position: static !important;\n      top: auto !important;\n      left: auto !important;\n      right: auto !important;\n      bottom: auto !important;\n      transform: none !important;\n      border-radius: 10px !important;\n      z-index: auto !important;\n      margin: 0 !important;\n      padding: 0 !important;\n    ",this.container.appendChild(this.iframe),this.wrapper.appendChild(this.closeBtn),this.wrapper.appendChild(this.container),this.backdrop.appendChild(this.wrapper),this.addStyles(),document.body.appendChild(this.backdrop),requestAnimationFrame((()=>{this.backdrop.classList.add("pp-popup-visible")}))}startCloseCountdown(){let t=this.closeDelay;const n=this.closeBtn.querySelector(".pp-popup-countdown-value");this.log(`Starting countdown from ${t} seconds`),this.countdownInterval=setInterval((()=>{t--,this.log(`Countdown: ${t} seconds remaining`),t>0?n.textContent=t:(clearInterval(this.countdownInterval),this.log("Countdown complete, enabling close button"),this.enableCloseButton())}),1e3)}enableCloseButton(){this.closeBtn.disabled=!1,this.closeBtn.classList.remove("pp-popup-close-disabled"),this.closeBtn.classList.add("pp-popup-close-enabled");this.closeBtn.querySelector(".pp-popup-countdown").textContent="Close",this.log("Close button enabled")}close(){this.closeBtn.disabled||(this.log("Closing popup"),this.backdrop.classList.remove("pp-popup-visible"),setTimeout((()=>{this.backdrop&&this.backdrop.parentNode&&this.backdrop.parentNode.removeChild(this.backdrop)}),300))}addStyles(){if(document.getElementById("pp-popup-styles"))return;const t=document.createElement("style");t.id="pp-popup-styles",t.textContent="\n      .pp-popup-backdrop {\n        position: fixed !important;\n        top: 0 !important;\n        left: 0 !important;\n        right: 0 !important;\n        bottom: 0 !important;\n        background: rgba(0, 0, 0, 0.85) !important;\n        z-index: 999999999 !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: center !important;\n        opacity: 0 !important;\n        transition: opacity 0.3s ease !important;\n        padding: 8px !important;\n        box-sizing: border-box !important;\n      }\n\n      .pp-popup-backdrop.pp-popup-visible {\n        opacity: 1 !important;\n      }\n\n      .pp-popup-wrapper {\n        position: relative !important;\n        width: 95vw !important;\n        height: auto !important;\n        display: flex !important;\n        flex-direction: column !important;\n        align-items: flex-end !important;\n        gap: 12px !important;\n      }\n\n      .pp-popup-container {\n        position: relative !important;\n        width: 100% !important;\n        height: 95vh !important;\n        background: #ffffff !important;\n        border-radius: 20px !important;\n        overflow: hidden !important;\n        box-shadow: 0 30px 90px rgba(0, 0, 0, 0.6) !important;\n        display: flex !important;\n        flex-direction: column !important;\n        padding: 8px !important;\n        box-sizing: border-box !important;\n      }\n\n      .pp-popup-close {\n        position: relative !important;\n        top: auto !important;\n        right: auto !important;\n        z-index: 1 !important;\n        background: #ffffff !important;\n        border: none !important;\n        border-radius: 12px !important;\n        padding: 12px 24px !important;\n        cursor: pointer !important;\n        display: flex !important;\n        align-items: center !important;\n        gap: 10px !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n        font-size: 15px !important;\n        font-weight: 600 !important;\n        color: #1a1a1a !important;\n        transition: all 0.2s ease !important;\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;\n        line-height: 1 !important;\n        white-space: nowrap !important;\n        pointer-events: auto !important;\n      }\n\n      .pp-popup-close-disabled {\n        opacity: 0.6 !important;\n        cursor: not-allowed !important;\n      }\n\n      .pp-popup-close-enabled {\n        opacity: 1 !important;\n      }\n\n      .pp-popup-close-enabled:hover {\n        background: #ffffff !important;\n        transform: scale(1.05) !important;\n        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4) !important;\n      }\n\n      .pp-popup-close svg {\n        width: 18px !important;\n        height: 18px !important;\n        flex-shrink: 0 !important;\n      }\n\n      .pp-popup-countdown {\n        display: inline !important;\n        margin: 0 !important;\n        padding: 0 !important;\n      }\n\n      .pp-popup-iframe {\n        width: 100% !important;\n        height: 100% !important;\n        border: 1px solid #e5e7eb !important;\n        border-radius: 16px !important;\n        display: block !important;\n        background: #ffffff !important;\n        flex: 1 !important;\n        overflow: hidden !important;\n        position: static !important;\n        top: auto !important;\n        left: auto !important;\n        right: auto !important;\n        bottom: auto !important;\n        transform: none !important;\n        z-index: auto !important;\n        margin: 0 !important;\n        padding: 0 !important;\n        max-width: none !important;\n        max-height: none !important;\n        min-width: 0 !important;\n        min-height: 0 !important;\n        opacity: 1 !important;\n        visibility: visible !important;\n        clip: auto !important;\n        clip-path: none !important;\n      }\n\n      @media (max-width: 1024px) {\n        .pp-popup-backdrop {\n          padding: 40px !important;\n        }\n\n        .pp-popup-wrapper {\n          width: 85vw !important;\n        }\n\n        .pp-popup-container {\n          height: 85vh !important;\n        }\n      }\n\n      @media (max-width: 768px) {\n        .pp-popup-backdrop {\n          padding: 4px !important;\n        }\n\n        .pp-popup-wrapper {\n          width: 95vw !important;\n          gap: 10px !important;\n        }\n\n        .pp-popup-container {\n          height: 95vh !important;\n          border-radius: 8px !important;\n          padding: 8px !important;\n        }\n\n        .pp-popup-close {\n          padding: 10px 20px !important;\n          font-size: 14px !important;\n        }\n\n        .pp-popup-close svg {\n          width: 16px !important;\n          height: 16px !important;\n        }\n\n        .pp-popup-iframe {\n          border-radius: 12px !important;\n        }\n      }\n\n      @media (max-width: 480px) {\n        .pp-popup-backdrop {\n          padding: 4px !important;\n        }\n\n        .pp-popup-wrapper {\n          width: 95vw !important;\n          gap: 8px !important;\n        }\n\n        .pp-popup-container {\n          height: 95vh !important;\n          border-radius: 12px !important;\n          padding: 12px !important;\n        }\n\n        .pp-popup-close {\n          padding: 8px 16px !important;\n          font-size: 13px !important;\n        }\n      }\n    ",document.head.appendChild(t)}}class d{constructor(t,n,e=!1){this.config=t,this.bannerPosition=n||{bottom:"8px",right:"8px"},this.debug=e,this.container=null,this.cornerButton=null,this.isVisible=!1,this.log("Anchor initialized with config:",this.config)}log(...t){this.debug&&console.log(`[Partner Program Debug ${(new Date).toLocaleTimeString()}]`,...t)}show(){this.isVisible?this.log("Anchor already visible, skipping"):(this.log("Creating anchor ad unit"),this.createContainer(),this.createCloseButton(),this.createIframe(),document.body.appendChild(this.container),setTimeout((()=>{this.container.style.setProperty("transform","translate(-50%, 0)","important"),this.isVisible=!0,this.log("Anchor ad displayed with transform:",this.container.style.transform),this.log("Container position:",this.container.getBoundingClientRect())}),100),this.enableCloseButton())}createContainer(){const t=document.createElement("div");t.className="pp-anchor-container";const n=this.config.width||770,e=this.config.height||250;t.style.cssText=`\n      position: fixed !important;\n      bottom: 0 !important;\n      left: 50% !important;\n      transform: translate(-50%, 100%) !important;\n      width: ${n}px !important;\n      height: ${e}px !important;\n      max-width: 100vw !important;\n      border: none !important;\n      border-radius: 0 !important;\n      box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.15) !important;\n      z-index: 999999998 !important;\n      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;\n      overflow: hidden !important;\n      padding: 0 !important;\n      margin: 0 !important;\n    `,window.innerWidth<800&&(t.style.width="100vw !important"),this.container=t}createCloseButton(){const t=document.createElement("button");t.className="pp-anchor-close",t.setAttribute("aria-label","Close ad");const n=this.config.closeDelay||10;t.innerHTML=`<span style="font-size: 10px; color: #999;">${n}</span>`,t.disabled=!0,t.style.cssText="\n      position: absolute !important;\n      top: 4px !important;\n      right: 4px !important;\n      width: 22px !important;\n      height: 22px !important;\n      background: #fff !important;\n      border: 1px solid #ccc !important;\n      border-radius: 3px !important;\n      color: #666 !important;\n      cursor: not-allowed !important;\n      font-size: 14px !important;\n      font-weight: bold !important;\n      line-height: 20px !important;\n      padding: 0 !important;\n      z-index: 999999999 !important;\n      transition: all 0.2s ease !important;\n      display: flex !important;\n      align-items: center !important;\n      justify-content: center !important;\n      font-family: Arial, sans-serif !important;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;\n    ",t.addEventListener("click",(n=>{n.preventDefault(),n.stopPropagation(),t.disabled||this.close()})),this.closeBtn=t,this.container.appendChild(t)}createIframe(){const t=document.createElement("iframe");t.src=this.config.url,t.className="pp-anchor-iframe",t.style.cssText="\n      position: static !important;\n      top: auto !important;\n      left: auto !important;\n      right: auto !important;\n      bottom: auto !important;\n      transform: none !important;\n      width: 100% !important;\n      height: 100% !important;\n      border: none !important;\n      border-radius: 0 !important;\n      display: block !important;\n      margin: 0 !important;\n      padding: 0 !important;\n      vertical-align: bottom !important;\n      z-index: auto !important;\n    ",t.setAttribute("allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"),t.setAttribute("loading","lazy"),this.container.appendChild(t)}enableCloseButton(){const t=this.config.closeDelay||10;let n=t;this.log(`Close button will be enabled in ${t} seconds`);const e=setInterval((()=>{n--,n>0?this.closeBtn.innerHTML=`<span style="font-size: 10px; color: #999;">${n}</span>`:(clearInterval(e),this.closeBtn.innerHTML="‚úï",this.closeBtn.disabled=!1,this.closeBtn.style.setProperty("cursor","pointer","important"),this.closeBtn.style.setProperty("color","#333","important"),this.closeBtn.style.setProperty("border-color","#999","important"),this.closeBtn.addEventListener("mouseenter",(()=>{this.closeBtn.style.setProperty("background","#f5f5f5","important"),this.closeBtn.style.setProperty("color","#000","important"),this.closeBtn.style.setProperty("border-color","#666","important")})),this.closeBtn.addEventListener("mouseleave",(()=>{this.closeBtn.style.setProperty("background","#fff","important"),this.closeBtn.style.setProperty("color","#333","important"),this.closeBtn.style.setProperty("border-color","#999","important")})),this.log("Close button enabled"))}),1e3)}close(){this.log("Closing anchor ad"),this.container.style.setProperty("transform","translate(-50%, 100%)","important"),setTimeout((()=>{this.container&&this.container.parentNode&&(this.container.parentNode.removeChild(this.container),this.isVisible=!1,this.log("Anchor ad removed"),this.showCornerButton())}),400)}showCornerButton(){this.log("Creating corner button");const t=document.createElement("button");t.className="pp-corner-button",t.textContent="Play Game",t.setAttribute("aria-label","Play Game");const n=Object.entries(this.bannerPosition).map((([t,n])=>`${t}: ${n} !important`)).join("; ");t.style.cssText=`\n      position: fixed !important;\n      ${n};\n      background: linear-gradient(180deg, #ffd700 0%, #ffb300 100%) !important;\n      color: #1a1a1a !important;\n      border: 2px solid #996600 !important;\n      border-radius: 8px !important;\n      padding: 6px 12px !important;\n      font-size: 11px !important;\n      font-weight: 900 !important;\n      text-transform: uppercase !important;\n      letter-spacing: 0.5px !important;\n      cursor: pointer !important;\n      z-index: 999999997 !important;\n      box-shadow: 0 3px 0 #996600, 0 4px 8px rgba(0, 0, 0, 0.3) !important;\n      font-family: 'Arial Black', 'Arial Bold', sans-serif !important;\n      animation: pp-buzz 3s ease-in-out infinite !important;\n      transition: all 0.3s ease !important;\n      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3) !important;\n    `,t.addEventListener("click",(()=>{this.log("Corner button clicked - reopening anchor"),t.remove(),this.cornerButton=null,this.show()})),t.addEventListener("mouseenter",(()=>{t.style.setProperty("transform","translateY(-2px)","important"),t.style.setProperty("box-shadow","0 5px 0 #996600, 0 6px 12px rgba(0, 0, 0, 0.4)","important")})),t.addEventListener("mouseleave",(()=>{t.style.setProperty("transform","translateY(0)","important"),t.style.setProperty("box-shadow","0 3px 0 #996600, 0 4px 8px rgba(0, 0, 0, 0.3)","important")})),t.addEventListener("mousedown",(()=>{t.style.setProperty("transform","translateY(1px)","important"),t.style.setProperty("box-shadow","0 2px 0 #996600, 0 3px 6px rgba(0, 0, 0, 0.2)","important")})),t.addEventListener("mouseup",(()=>{t.style.setProperty("transform","translateY(-2px)","important"),t.style.setProperty("box-shadow","0 5px 0 #996600, 0 6px 12px rgba(0, 0, 0, 0.4)","important")})),document.body.appendChild(t),this.cornerButton=t,this.log("Corner button displayed")}}const m=()=>{if(document.getElementById("pp-anchor-styles"))return;const t=document.createElement("style");t.id="pp-anchor-styles",t.textContent="\n    @media (max-width: 799px) {\n      .pp-anchor-container {\n        border-radius: 0 !important;\n      }\n    }\n\n    @keyframes pp-buzz {\n      0%, 100% {\n        transform: translateX(0) scale(1);\n      }\n      10%, 30%, 50% {\n        transform: translateX(-2px) scale(1);\n      }\n      20%, 40% {\n        transform: translateX(2px) scale(1);\n      }\n      60% {\n        transform: translateX(0) scale(1.05);\n      }\n      65% {\n        transform: translateX(0) scale(1);\n      }\n    }\n  ",document.head.appendChild(t)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m();const u="pp_overlay_shown";function g(){return null!==function(t){const n=`${t}=`,e=document.cookie.split(";");for(let a=0;a<e.length;a++){let t=e[a];for(;" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(n))return t.substring(n.length,t.length)}return null}(u)}function f(){!function(t,n,e){const a=new Date;a.setTime(a.getTime()+60*e*60*1e3);const i=`expires=${a.toUTCString()}`;document.cookie=`${t}=${n};${i};path=/`}(u,"1",.5)}const b="1.0.0";const x=new class{constructor(){this.version=b,this.config=new p,this.ui=null,this.activeFeatures={overlay:null,banner:null,popup:null,anchor:null},this.stats={overlayClicks:0,bannerImpressions:0,bannerClicks:0,popupShows:0,anchorShows:0,anchorCloses:0,lastActivity:null},this.install=this.install.bind(this),this.uninstall=this.uninstall.bind(this),this.enable=this.enable.bind(this),this.disable=this.disable.bind(this),this.reload=this.reload.bind(this),this.log("Launcher initialized",{version:b})}log(...t){if(this.config.get().debug){const n=(new Date).toISOString().split("T")[1].slice(0,-1);console.log(`%c[Partner Launcher ${n}]`,"color: #667eea; font-weight: bold",...t)}}async install(){if(this.log("Installing launcher..."),this.config.isInstalled())return this.log("Launcher already installed"),this.initialize(),{success:!0,message:"Already installed and initialized!"};try{this.config.markInstalled(),this.initializeUI();const n=this.generateBookmarklet();this.log("‚úÖ Launcher installed successfully!"),this.log("üìå To persist across page refreshes, create a bookmarklet:"),this.log("Bookmarklet code:",n);try{await navigator.clipboard.writeText(n),console.log("‚úÖ Bookmarklet code copied to clipboard!")}catch(t){console.log("‚ÑπÔ∏è Copy the bookmarklet code manually from above")}return{success:!0,message:`Launcher installed!\n\nüìå BOOKMARKLET METHOD (Recommended):\n1. Create a new bookmark\n2. Name it "Partner Launcher"\n3. Paste this as the URL (copied to clipboard):\n   ${n}\n4. Click the bookmark on any page to load the launcher\n\nüí° Or just paste the installation code again when you need it.\n\nConfiguration is saved and will persist!`}}catch(n){return console.error("[Launcher] Installation failed:",n),{success:!1,message:`Installation failed: ${n.message}`}}}generateBookmarklet(){return"javascript:(async()=>{if(window.PartnerLauncher&&window.PartnerLauncher.config.isInstalled()){window.PartnerLauncher.initialize();window.PartnerLauncher.openLauncher();}else{const r=await fetch('https://cdn.jsdelivr.net/gh/docklib/partners@master/launcher.js');const c=await r.text();eval(c);await PartnerLauncher.install();}})();"}async uninstall(){this.log("Uninstalling launcher...");try{return this.stopAllFeatures(),this.ui&&(this.ui.destroy(),this.ui=null),this.config.markUninstalled(),delete window.PartnerLauncher,this.log("‚úÖ Launcher uninstalled successfully"),{success:!0,message:"Launcher uninstalled. Configuration cleared from localStorage."}}catch(t){return console.error("[Launcher] Uninstall failed:",t),{success:!1,message:`Uninstall failed: ${t.message}`}}}initializeUI(){this.ui||(this.ui=new l(this,this.config),this.log("UI initialized"))}initialize(){this.log("Initializing launcher...");const t=this.config.get();!function(t){if(!t||!Array.isArray(t)||0===t.length)return!1;const n=window.location.hostname.toLowerCase();return t.some((t=>{const e=t.toLowerCase().trim();if(e.startsWith("*.")){const t=e.substring(2);return!!n.endsWith("."+t)}return n===e||!!n.endsWith("."+e)}))}(t.excludeDomains)?(this.initializeUI(),t.enabled&&this.startFeatures(),this.log("Launcher initialized successfully")):this.log("Domain excluded, skipping initialization")}startFeatures(){const t=this.config.get();this.log("Starting features...",t),t.features.overlay.enabled&&this.showOverlay(),t.features.banner.enabled&&this.showBanner(),t.features.popup.enabled&&setTimeout((()=>this.showPopup()),t.features.popup.delay),t.features.anchor.enabled&&setTimeout((()=>this.showAnchor()),t.features.anchor.delay)}stopAllFeatures(){this.log("Stopping all features..."),this.hideOverlay(),this.hideBanner(),this.hidePopup(),this.hideAnchor()}showOverlay(){const t=this.config.get().features.overlay;if(t.cookieTracking&&g())return void this.log("Overlay skipped - already shown within tracking period");this.log("Showing overlay");const n=document.createElement("div");n.id="pp-launcher-overlay",n.style.cssText="\n      position: fixed !important;\n      top: 0 !important;\n      left: 0 !important;\n      right: 0 !important;\n      bottom: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      z-index: 999999999 !important;\n    ",n.addEventListener("mousedown",(e=>{if(e.preventDefault(),e.stopPropagation(),t.links&&t.links.length>0){const n=Math.floor(Math.random()*t.links.length);let e=t.links[n].link;if(t.direct)try{const t=new URL(e);t.searchParams.set("direct","1");const n=window.location.port?`${window.location.hostname}:${window.location.port}${window.location.pathname}`:`${window.location.hostname}${window.location.pathname}`;t.searchParams.set("ref",n),e=t.toString(),window.open(e,"_top","noreferrer")}catch(a){this.log("Invalid URL in overlay link:",e),window.open(e,"_blank","noreferrer")}else window.open(e,"_blank","noreferrer");this.stats.overlayClicks++,this.stats.lastActivity=(new Date).toISOString()}t.cookieTracking&&f(),n.remove(),this.activeFeatures.overlay=null}),{capture:!0}),document.body.appendChild(n),this.activeFeatures.overlay=n}hideOverlay(){this.activeFeatures.overlay&&(this.activeFeatures.overlay.remove(),this.activeFeatures.overlay=null,this.log("Overlay hidden"))}showBanner(t=null){const n=this.config.get(),e=t||n.features.banner;this.log("Showing banner",e),this.activeFeatures.banner?this.log("Banner already active"):(this.activeFeatures.banner=new c(e.banners,e.iframeBanners,e.showIframeBanner,e.position,n.debug,e.maxBanners),this.stats.bannerImpressions++,this.stats.lastActivity=(new Date).toISOString())}hideBanner(){this.activeFeatures.banner=null,this.log("Banner hidden")}showPopup(t=null){const n=this.config.get(),e=n.features.popup,a=t?[t]:e.urls;a&&0!==a.length?(this.log("Showing popup",a),this.activeFeatures.popup?this.log("Popup already active"):(this.activeFeatures.popup=new h(a,n.debug),this.activeFeatures.popup.show(),this.stats.popupShows++,this.stats.lastActivity=(new Date).toISOString())):this.log("No popup URLs configured")}hidePopup(){this.activeFeatures.popup&&(this.activeFeatures.popup.close(),this.activeFeatures.popup=null,this.log("Popup hidden"))}showAnchor(t=null){const n=this.config.get(),e=t||n.features.anchor.config,a=n.features.banner.position;e.url?(this.log("Showing anchor",e),this.activeFeatures.anchor?this.log("Anchor already active"):(this.activeFeatures.anchor=new d(e,a,n.debug),this.activeFeatures.anchor.show(),this.stats.anchorShows++,this.stats.lastActivity=(new Date).toISOString())):this.log("No anchor URL configured")}hideAnchor(){this.activeFeatures.anchor&&(this.activeFeatures.anchor.close(),this.activeFeatures.anchor=null,this.log("Anchor hidden"))}enable(){this.config.update("enabled",!0),this.startFeatures(),this.log("Launcher enabled")}disable(){this.config.update("enabled",!1),this.stopAllFeatures(),this.log("Launcher disabled")}reload(){this.log("Reloading launcher..."),this.stopAllFeatures(),this.initialize()}getConfig(){return this.config.get()}setConfig(t){return this.config.set(t)}resetConfig(){return this.config.reset()}exportConfig(){return this.config.export()}importConfig(t){return this.config.import(t)}openLauncher(){this.ui&&this.ui.open()}closeLauncher(){this.ui&&this.ui.close()}toggleLauncher(){this.ui&&this.ui.toggle()}debug(t){this.config.update("debug",t),this.log("Debug mode "+(t?"enabled":"disabled"))}getStats(){return{...this.stats}}resetStats(){this.stats={overlayClicks:0,bannerImpressions:0,bannerClicks:0,popupShows:0,anchorShows:0,anchorCloses:0,lastActivity:null},this.log("Stats reset")}};return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{x.config.isInstalled()&&x.initialize()})):x.config.isInstalled()&&x.initialize(),window.PartnerLauncher=x,x}();
