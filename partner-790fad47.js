!function(){"use strict";class t{constructor(t,n=!1){this.popups=t,this.debug=n,this.closeDelay=10,this.shown=!1,this.log("Popup initialized",{popups:t})}log(...t){this.debug}show(){if(this.shown||!this.popups||0===this.popups.length)return;this.shown=!0;const t=this.getRandomPopup();this.log("Showing popup",{url:t}),this.createPopup(t),this.startCloseCountdown()}getRandomPopup(){const t=Math.floor(Math.random()*this.popups.length);return this.popups[t]}createPopup(t){this.backdrop=document.createElement("div"),this.backdrop.className="pp-popup-backdrop",this.container=document.createElement("div"),this.container.className="pp-popup-container",this.closeBtn=document.createElement("button"),this.closeBtn.className="pp-popup-close pp-popup-close-disabled",this.closeBtn.disabled=!0,this.closeBtn.innerHTML=`\n      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <line x1="18" y1="6" x2="6" y2="18"></line>\n        <line x1="6" y1="6" x2="18" y2="18"></line>\n      </svg>\n      <span class="pp-popup-countdown">Please wait <span class="pp-popup-countdown-value">${this.closeDelay}</span>s...</span>\n    `,this.closeBtn.addEventListener("click",(()=>this.close())),this.iframe=document.createElement("iframe"),this.iframe.className="pp-popup-iframe",this.iframe.src=t,this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("allowfullscreen","true"),this.container.appendChild(this.closeBtn),this.container.appendChild(this.iframe),this.backdrop.appendChild(this.container),this.addStyles(),document.body.appendChild(this.backdrop),requestAnimationFrame((()=>{this.backdrop.classList.add("pp-popup-visible")}))}startCloseCountdown(){let t=this.closeDelay;const n=this.closeBtn.querySelector(".pp-popup-countdown-value"),p=setInterval((()=>{t--,t>0?n.textContent=t:(clearInterval(p),this.enableCloseButton())}),1e3)}enableCloseButton(){this.closeBtn.disabled=!1,this.closeBtn.classList.remove("pp-popup-close-disabled"),this.closeBtn.classList.add("pp-popup-close-enabled");this.closeBtn.querySelector(".pp-popup-countdown").textContent="Close",this.log("Close button enabled")}close(){this.closeBtn.disabled||(this.log("Closing popup"),this.backdrop.classList.remove("pp-popup-visible"),setTimeout((()=>{this.backdrop&&this.backdrop.parentNode&&this.backdrop.parentNode.removeChild(this.backdrop)}),300))}addStyles(){if(document.getElementById("pp-popup-styles"))return;const t=document.createElement("style");t.id="pp-popup-styles",t.textContent="\n      .pp-popup-backdrop {\n        position: fixed !important;\n        top: 0 !important;\n        left: 0 !important;\n        right: 0 !important;\n        bottom: 0 !important;\n        background: rgba(0, 0, 0, 0.85) !important;\n        z-index: 999999999 !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: center !important;\n        opacity: 0 !important;\n        transition: opacity 0.3s ease !important;\n        padding: 20px !important;\n        box-sizing: border-box !important;\n      }\n\n      .pp-popup-backdrop.pp-popup-visible {\n        opacity: 1 !important;\n      }\n\n      .pp-popup-container {\n        position: relative !important;\n        width: 100% !important;\n        max-width: 1200px !important;\n        height: 90vh !important;\n        max-height: 800px !important;\n        background: #ffffff !important;\n        border-radius: 12px !important;\n        overflow: hidden !important;\n        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;\n        display: flex !important;\n        flex-direction: column !important;\n      }\n\n      .pp-popup-close {\n        position: absolute !important;\n        top: 16px !important;\n        right: 16px !important;\n        z-index: 10 !important;\n        background: #ffffff !important;\n        border: 2px solid #e5e7eb !important;\n        border-radius: 8px !important;\n        padding: 8px 16px !important;\n        cursor: pointer !important;\n        display: flex !important;\n        align-items: center !important;\n        gap: 8px !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n        font-size: 14px !important;\n        font-weight: 500 !important;\n        color: #6b7280 !important;\n        transition: all 0.2s ease !important;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;\n        line-height: 1 !important;\n        white-space: nowrap !important;\n      }\n\n      .pp-popup-close-disabled {\n        opacity: 0.5 !important;\n        cursor: not-allowed !important;\n      }\n\n      .pp-popup-close-enabled {\n        opacity: 1 !important;\n      }\n\n      .pp-popup-close-enabled:hover {\n        background: #f3f4f6 !important;\n        border-color: #d1d5db !important;\n        transform: scale(1.05) !important;\n      }\n\n      .pp-popup-close svg {\n        width: 20px !important;\n        height: 20px !important;\n        flex-shrink: 0 !important;\n      }\n\n      .pp-popup-countdown {\n        display: inline !important;\n        margin: 0 !important;\n        padding: 0 !important;\n      }\n\n      .pp-popup-iframe {\n        width: 100% !important;\n        height: 100% !important;\n        border: none !important;\n        display: block !important;\n        background: #ffffff !important;\n      }\n\n      @media (max-width: 768px) {\n        .pp-popup-container {\n          max-width: 100% !important;\n          height: 100vh !important;\n          max-height: 100vh !important;\n          border-radius: 0 !important;\n        }\n\n        .pp-popup-backdrop {\n          padding: 0 !important;\n        }\n\n        .pp-popup-close {\n          top: 12px !important;\n          right: 12px !important;\n          padding: 6px 12px !important;\n          font-size: 13px !important;\n        }\n\n        .pp-popup-close svg {\n          width: 18px !important;\n          height: 18px !important;\n        }\n      }\n    ",document.head.appendChild(t)}}const n=[{link:"https://colormagic.app/embed?ref=themarzlibrary.org",text:"Color Magic"}];{let p=function(){n&&n.length>0&&setTimeout((()=>{new t(n,false).show()}),5e3)};{const t=document.createElement("script");t.defer=!0,t.dataset.domain="science-lib",t.src="https://stats.senty.com.au/js/script.outbound-links.pageview-props.tagged-events.js",document.head.appendChild(t)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{p()})):p()}}();
